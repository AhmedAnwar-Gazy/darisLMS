@startuml InteractiveContentTracking
title Interactive Content (SCORM/H5P) Tracking (SMD-07)
hide empty description

state "Not Attempted" as not_attempted
state "Initialized" as initialized
state "Incomplete/Running" as incomplete
state "Suspended" as suspended
state "Completed" as completed
state "Passed" as passed
state "Failed" as failed

[*] --> not_attempted

not_attempted --> initialized : User Clicks Launch()
initialized --> incomplete : Content Loads()
incomplete --> suspended : User Exits() \n(Save Progress)
suspended --> incomplete : User Resumes()
incomplete --> completed : Criteria Met() \n(No Score logic)
completed --> passed : Score >= Mastery Score
completed --> failed : Score < Mastery Score

passed --> [*]
failed --> [*]

note right of not_attempted
  User enrolled but never opened
  No tracking data exists
  Ready for first attempt
end note

note right of initialized
  Player launched
  API handshake successful
  LMSInitialize complete
end note

note right of incomplete
  User actively engaging
  Data being sent (time, location)
  Mastery criteria not met yet
end note

note right of suspended
  User exited before finishing
  Bookmark saved
  Can resume later
end note

note right of completed
  Viewed all required content
  Reached end of video/slides
  Score may be below mastery
end note

note right of passed
  Activity completed AND
  Score >= Mastery Score
  Successfully passed
end note

note right of failed
  Activity completed BUT
  Score < Mastery Score
  Did not meet requirements
end note

@enduml